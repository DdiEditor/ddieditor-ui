(: declare namespace ddieditor= "http://ddialliance.org/ddieditor/ns";declare function ddieditor:label_lang($element) {  for $z in $element/*[namespace-uri()='ddi:datacollection:3_0' and local-name()='QuestionText'] return if($z/@xml:lang/string()="") then <Label>{ddieditor:label_text($z)}</Label> else <Label lang="{$z/@xml:lang/string()}">{ddieditor:label_text($z)}</Label> }; declare function ddieditor:label_text($element) { for $q in $element/*[namespace-uri()='ddi:datacollection:3_0' and local-name()='LiteralText']/*[namespace-uri()='ddi:datacollection:3_0' and local-name()='Text'] return $q/text() }; declare function ddieditor:root_by_id() { for $x in doc("large-doc.xml")//*[namespace-uri()='ddi:datacollection:3_0' and local-name()='QuestionScheme'] where $x/@id = 'qs_' return $x}; <dl:LightXmlObjectList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="ddieditor-lightobject ddieditor-lightxmlobject.xsd" xmlns:dl="ddieditor-lightobject">{ for $x in ddieditor:root_by_id() for $y in $x/*[namespace-uri()='ddi:datacollection:3_0' and local-name()='QuestionItem']  return <LightXmlObject element="QuestionItem" id="{$y/@id/string()}" version="{$y/@version/string()}" parentId="{$x/@id/string()}" parentVersion="{$x/@version/string()}">{ddieditor:label_lang($y)}</LightXmlObject>}</dl:LightXmlObjectList> :)
for $element in doc("large-doc.xml")
//*[namespace-uri()='ddi:datacollection:3_0' and local-name()='QuestionScheme'] 
for $child in $element//*[namespace-uri()='ddi:datacollection:3_0' and local-name()='QuestionItem']  
where $element/@id = 'qs_' and $child/@id = 'qi_1456' 
return $child